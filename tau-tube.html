<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAU TUBE - Media Platform</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        .animate-marquee {
            animation: marquee 25s linear infinite;
        }
        .video-thumbnail {
            transition: transform 0.2s;
        }
        .video-thumbnail:hover {
            transform: scale(1.05);
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #444;
        }
    </style>
</head>
<body class="bg-black text-white custom-scrollbar">
    <nav class="fixed top-0 w-full z-50 bg-black/95 border-b border-gray-800 backdrop-blur-sm">
        <div class="max-width-7xl mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <button class="p-2 hover:bg-gray-800 rounded-full">
                    <i data-lucide="menu"></i>
                </button>
                <div class="flex items-center gap-1 cursor-pointer" onclick="location.reload()">
                    <div class="w-8 h-8 bg-red-600 rounded-lg flex items-center justify-center">
                        <i data-lucide="play" fill="white" size="18"></i>
                    </div>
                    <span class="text-xl font-bold tracking-tighter">TAU TUBE</span>
                </div>
            </div>

            <div class="hidden md:flex flex-1 max-w-2xl mx-8">
                <div class="flex w-full">
                    <input type="text" placeholder="Search values, creators, or news..." 
                           class="w-full bg-zinc-900 border border-gray-700 rounded-l-full px-4 py-2 focus:outline-none focus:border-blue-500">
                    <button class="bg-zinc-800 border border-l-0 border-gray-700 rounded-r-full px-6 hover:bg-zinc-700">
                        <i data-lucide="search" size="20"></i>
                    </button>
                </div>
            </div>

            <div class="flex items-center gap-4">
                <div class="hidden sm:flex items-center bg-zinc-800 px-3 py-1 rounded-full gap-2">
                    <span class="text-yellow-500 font-bold" id="user-points">0</span>
                    <span class="text-xs text-gray-400">iKbp</span>
                </div>
                <button class="p-2 hover:bg-gray-800 rounded-full relative">
                    <i data-lucide="bell"></i>
                    <span class="absolute top-1 right-1 w-2 h-2 bg-red-600 rounded-full"></span>
                </button>
                <div id="auth-section">
                    <button onclick="handleLogin()" class="flex items-center gap-2 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-full font-medium transition">
                        <i data-lucide="user-circle"></i>
                        Sign In
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main class="pt-20 px-4 pb-20">
        <div class="bg-red-600/10 border-y border-red-600/20 py-2 mb-6 overflow-hidden whitespace-nowrap">
            <div class="animate-marquee inline-block text-red-500 font-medium italic">
                BREAKING: New Sovereign Value Declaration Protocol launched • TAU Africa Marketplace reaching 1M users • Kabiru point conversion rate updated •
            </div>
        </div>

        <div class="flex gap-3 mb-6 overflow-x-auto pb-2 no-scrollbar">
            <button class="bg-white text-black px-4 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap">All</button>
            <button class="bg-zinc-800 hover:bg-zinc-700 px-4 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap">Kabiru Mining</button>
            <button class="bg-zinc-800 hover:bg-zinc-700 px-4 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap">Sovereignty</button>
            <button class="bg-zinc-800 hover:bg-zinc-700 px-4 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap">Marketplace</button>
            <button class="bg-zinc-800 hover:bg-zinc-700 px-4 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap">Education</button>
        </div>

        <div id="content-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-4 gap-y-8">
            </div>
    </main>

    <div id="video-modal" class="fixed inset-0 z-[100] bg-black hidden flex-col">
        <div class="h-16 flex items-center justify-between px-4 border-b border-gray-800">
            <h3 id="modal-video-title" class="font-bold truncate max-w-md"></h3>
            <button onclick="closeVideoPlayer()" class="p-2 hover:bg-gray-800 rounded-full">
                <i data-lucide="x"></i>
            </button>
        </div>
        <div class="flex-1 flex flex-col lg:flex-row p-4 gap-6 overflow-y-auto">
            <div class="lg:w-3/4">
                <div class="aspect-video bg-zinc-900 rounded-xl overflow-hidden shadow-2xl">
                    <video id="main-player" controls class="w-full h-full" playsinline>
                        Your browser does not support the video tag.
                    </video>
                </div>
                <div class="mt-4">
                    <h2 id="player-title" class="text-xl font-bold"></h2>
                    <div class="flex flex-wrap items-center justify-between mt-4 gap-4">
                        <div class="flex items-center gap-3">
                            <div id="author-img" class="w-10 h-10 bg-zinc-700 rounded-full overflow-hidden"></div>
                            <div>
                                <p id="player-author" class="font-bold"></p>
                                <p class="text-gray-400 text-xs">15.2K Subscribers</p>
                            </div>
                            <button class="ml-4 bg-white text-black px-4 py-2 rounded-full font-medium text-sm hover:bg-gray-200">Subscribe</button>
                        </div>
                        <div class="flex items-center gap-2">
                            <button class="flex items-center gap-2 bg-zinc-800 hover:bg-zinc-700 px-4 py-2 rounded-full text-sm">
                                <i data-lucide="thumbs-up" size="18"></i> 2.4K
                            </button>
                            <button onclick="shareCurrentVideo()" class="flex items-center gap-2 bg-zinc-800 hover:bg-zinc-700 px-4 py-2 rounded-full text-sm">
                                <i data-lucide="share-2" size="18"></i> Share & Earn
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="lg:w-1/4">
                <h4 class="font-bold mb-4">Up Next</h4>
                <div id="sidebar-recommendations" class="flex flex-col gap-4"></div>
            </div>
        </div>
    </main>

<script>
    // Lucide Icons
    lucide.createIcons();

    let currentUser = null;
    let userPoints = parseInt(localStorage.getItem('ikbp_points')) || 0;
    document.getElementById('user-points').textContent = userPoints;

    // Corrected Video Data using Relative Paths for your repository
    const sampleVideos = [
        { 
            id: 1, 
            title: 'TAU Africa Event 2021', 
            thumbnail: 'https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=400', 
            videoUrl: 'video1.mp4', // Corrected to relative link
            duration: '07:08', 
            views: '123,456', 
            author: 'TAU Official' 
        },
        { 
            id: 2, 
            title: 'Tau starting from 0 2021', 
            thumbnail: 'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400', 
            videoUrl: 'video2.mp4', // Corrected to relative link
            duration: '1:14', 
            views: '85,600', 
            author: 'Tau Foundation' 
        },
        { 
            id: 3, 
            title: 'Live: Breaking News: Kabiru point system', 
            thumbnail: 'https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=400', 
            videoUrl: 'video3.mp4', // Corrected to relative link
            duration: 'LIVE', 
            views: '34,210', 
            author: 'TAU Broadcasting',
            isLive: true
        }
    ];

    function loadContent() {
        const grid = document.getElementById('content-grid');
        grid.innerHTML = sampleVideos.map(video => `
            <div class="video-thumbnail cursor-pointer group" onclick='openVideoPlayer(${JSON.stringify(video)})'>
                <div class="relative aspect-video rounded-xl overflow-hidden bg-zinc-900">
                    <img src="${video.thumbnail}" class="w-full h-full object-cover">
                    <div class="absolute bottom-2 right-2 bg-black/80 px-1.5 py-0.5 rounded text-xs font-bold">
                        ${video.duration}
                    </div>
                    ${video.isLive ? '<div class="absolute top-2 left-2 bg-red-600 px-2 py-0.5 rounded text-[10px] font-bold">LIVE</div>' : ''}
                </div>
                <div class="mt-3 flex gap-3">
                    <div class="w-9 h-9 bg-zinc-800 rounded-full flex-shrink-0"></div>
                    <div>
                        <h3 class="font-bold line-clamp-2 leading-tight group-hover:text-blue-400 transition">${video.title}</h3>
                        <p class="text-gray-400 text-sm mt-1">${video.author}</p>
                        <p class="text-gray-400 text-xs">${video.views} views • 2 hours ago</p>
                    </div>
                </div>
            </div>
        `).join('');
    }

    function openVideoPlayer(video) {
        const modal = document.getElementById('video-modal');
        const player = document.getElementById('main-player');
        
        document.getElementById('modal-video-title').textContent = video.title;
        document.getElementById('player-title').textContent = video.title;
        document.getElementById('player-author').textContent = video.author;
        
        player.src = video.videoUrl;
        modal.classList.remove('hidden');
        player.play();
        
        // Load sidebar items
        const sidebar = document.getElementById('sidebar-recommendations');
        sidebar.innerHTML = sampleVideos.filter(v => v.id !== video.id).map(v => `
            <div class="flex gap-2 cursor-pointer group" onclick='openVideoPlayer(${JSON.stringify(v)})'>
                <div class="w-40 aspect-video rounded-lg overflow-hidden flex-shrink-0">
                    <img src="${v.thumbnail}" class="w-full h-full object-cover">
                </div>
                <div>
                    <h5 class="text-sm font-bold line-clamp-2 leading-snug group-hover:text-blue-400">${v.title}</h5>
                    <p class="text-gray-400 text-[10px] mt-1">${v.author}</p>
                    <p class="text-gray-400 text-[10px]">${v.views} views</p>
                </div>
            </div>
        `).join('');
    }

    function closeVideoPlayer() {
        const modal = document.getElementById('video-modal');
        const player = document.getElementById('main-player');
        player.pause();
        player.src = "";
        modal.classList.add('hidden');
    }

    function shareCurrentVideo() {
        userPoints += 10;
        localStorage.setItem('ikbp_points', userPoints);
        document.getElementById('user-points').textContent = userPoints;
        alert("Link copied! You earned 10 iKbp points for sharing.");
    }

    window.onload = loadContent;
</script>
</body>
</html>
