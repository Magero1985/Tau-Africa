<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAU TUBE - Admin Dashboard</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-900 min-h-screen">

    <!-- Header -->
    <div class="bg-gradient-to-r from-purple-600 to-blue-600 p-4">
        <div class="max-w-7xl mx-auto">
            <h1 class="text-white text-2xl font-bold">TAU TUBE - Admin Dashboard</h1>
            <p class="text-purple-200 text-sm">Manage content, users, and platform features</p>
        </div>
    </div>

    <!-- Navigation -->
    <div class="max-w-7xl mx-auto p-4">
        <div class="bg-gray-800 rounded-lg mb-6">
            <div class="flex flex-wrap gap-2 p-2">
                <button onclick="showSection('dashboard')" id="nav-dashboard" class="px-4 py-2 rounded-lg font-semibold bg-purple-600 text-white">
                    Dashboard
                </button>
                <button onclick="showSection('moderation')" id="nav-moderation" class="px-4 py-2 rounded-lg font-semibold text-gray-400 hover:bg-gray-700">
                    Content Moderation
                </button>
                <button onclick="showSection('news')" id="nav-news" class="px-4 py-2 rounded-lg font-semibold text-gray-400 hover:bg-gray-700">
                    Breaking News
                </button>
                <button onclick="showSection('ads')" id="nav-ads" class="px-4 py-2 rounded-lg font-semibold text-gray-400 hover:bg-gray-700">
                    Advertisements
                </button>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="section-dashboard">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                <!-- Stats Cards -->
                <div class="bg-gray-800 rounded-lg p-6 border-l-4 border-purple-600">
                    <div class="flex items-center justify-between mb-4">
                        <div class="p-3 rounded-lg bg-purple-600 bg-opacity-20">
                            <i data-lucide="users" style="color: #8b5cf6; width: 24px; height: 24px;"></i>
                        </div>
                        <span class="text-sm text-green-400">+12.5%</span>
                    </div>
                    <h3 class="text-gray-400 text-sm mb-1">Total Users</h3>
                    <p class="text-white text-2xl font-bold">1,247</p>
                </div>

                <div class="bg-gray-800 rounded-lg p-6 border-l-4 border-blue-600">
                    <div class="flex items-center justify-between mb-4">
                        <div class="p-3 rounded-lg bg-blue-600 bg-opacity-20">
                            <i data-lucide="video" style="color: #3b82f6; width: 24px; height: 24px;"></i>
                        </div>
                        <span class="text-sm text-green-400">+8.3%</span>
                    </div>
                    <h3 class="text-gray-400 text-sm mb-1">Total Videos</h3>
                    <p class="text-white text-2xl font-bold">456</p>
                </div>

                <div class="bg-gray-800 rounded-lg p-6 border-l-4 border-green-600">
                    <div class="flex items-center justify-between mb-4">
                        <div class="p-3 rounded-lg bg-green-600 bg-opacity-20">
                            <i data-lucide="activity" style="color: #10b981; width: 24px; height: 24px;"></i>
                        </div>
                        <span class="text-sm text-green-400">+23.1%</span>
                    </div>
                    <h3 class="text-gray-400 text-sm mb-1">Total Views</h3>
                    <p class="text-white text-2xl font-bold">125,847</p>
                </div>

                <div class="bg-gray-800 rounded-lg p-6 border-l-4 border-yellow-600">
                    <div class="flex items-center justify-between mb-4">
                        <div class="p-3 rounded-lg bg-yellow-600 bg-opacity-20">
                            <i data-lucide="trending-up" style="color: #f59e0b; width: 24px; height: 24px;"></i>
                        </div>
                        <span class="text-sm text-green-400">+15.7%</span>
                    </div>
                    <h3 class="text-gray-400 text-sm mb-1">iKbp Points Issued</h3>
                    <p class="text-white text-2xl font-bold">45,690</p>
                </div>

                <div class="bg-gray-800 rounded-lg p-6 border-l-4 border-red-600">
                    <div class="flex items-center justify-between mb-4">
                        <div class="p-3 rounded-lg bg-red-600 bg-opacity-20">
                            <i data-lucide="alert-circle" style="color: #ef4444; width: 24px; height: 24px;"></i>
                        </div>
                        <span class="text-sm text-red-400">-5.2%</span>
                    </div>
                    <h3 class="text-gray-400 text-sm mb-1">Pending Review</h3>
                    <p class="text-white text-2xl font-bold">23</p>
                </div>

                <div class="bg-gray-800 rounded-lg p-6 border-l-4 border-pink-600">
                    <div class="flex items-center justify-between mb-4">
                        <div class="p-3 rounded-lg bg-pink-600 bg-opacity-20">
                            <i data-lucide="bell" style="color: #ec4899; width: 24px; height: 24px;"></i>
                        </div>
                        <span class="text-sm text-gray-400">0%</span>
                    </div>
                    <h3 class="text-gray-400 text-sm mb-1">Active Streams</h3>
                    <p class="text-white text-2xl font-bold">3</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Recent Activity -->
                <div class="bg-gray-800 rounded-lg p-6">
                    <h3 class="text-white text-lg font-bold mb-4">Recent Activity</h3>
                    <div class="space-y-3" id="recent-activity">
                        <!-- Activity items will be loaded here -->
                    </div>
                </div>

                <!-- Top Contributors -->
                <div class="bg-gray-800 rounded-lg p-6">
                    <h3 class="text-white text-lg font-bold mb-4">Top Contributors</h3>
                    <div class="space-y-3" id="top-contributors">
                        <!-- Contributors will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Moderation Section -->
        <div id="section-moderation" class="hidden">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-white text-2xl font-bold">Content Moderation</h2>
                <div class="bg-yellow-500 text-gray-900 px-4 py-2 rounded-lg font-bold" id="pending-count">
                    0 Pending
                </div>
            </div>
            <div id="pending-content" class="space-y-4">
                <!-- Pending content will be loaded here -->
            </div>
        </div>

        <!-- Breaking News Section -->
        <div id="section-news" class="hidden">
            <h2 class="text-white text-2xl font-bold mb-6">Breaking News & Updates</h2>

            <div class="bg-gray-800 rounded-lg p-6 mb-6">
                <h3 class="text-white text-lg font-semibold mb-4">Post New Breaking News</h3>
                
                <form id="news-form" class="space-y-4">
                    <div>
                        <label class="text-gray-300 block mb-2">News Content</label>
                        <textarea id="news-content" required class="w-full bg-gray-700 text-white p-3 rounded-lg" rows="3" placeholder="Enter breaking news or update..."></textarea>
                    </div>

                    <div>
                        <label class="text-gray-300 block mb-2">Priority</label>
                        <select id="news-priority" class="w-full bg-gray-700 text-white p-3 rounded-lg">
                            <option value="normal">Normal</option>
                            <option value="high">High Priority</option>
                            <option value="urgent">Urgent</option>
                        </select>
                    </div>

                    <button type="submit" class="w-full bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg flex items-center justify-center gap-2 font-semibold">
                        <i data-lucide="send" style="width: 18px; height: 18px;"></i> Publish Breaking News
                    </button>
                </form>
            </div>

            <div class="space-y-4">
                <h3 class="text-white text-lg font-semibold">Active Breaking News</h3>
                <div id="news-list">
                    <!-- News items will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Advertisements Section -->
        <div id="section-ads" class="hidden">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-white text-2xl font-bold">Advertisement Manager</h2>
                <button class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 font-semibold">
                    <i data-lucide="plus" style="width: 18px; height: 18px;"></i> Create New Ad
                </button>
            </div>

            <div id="ads-list" class="space-y-4">
                <!-- Ads will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const FIREBASE_CONFIG = {
            apiKey: "AIzaSyBcTzvl5lwpojRQM5lwyWe3hwp4upogUWw",
            authDomain: "tau-main-app.firebaseapp.com",
            projectId: "tau-main-app",
            storageBucket: "tau-main-app.firebasestorage.app",
            messagingSenderId: "69734421488",
            appId: "1:69734421488:web:d13ae38f1c7d79cc854335"
        };

        firebase.initializeApp(FIREBASE_CONFIG);
        const auth = firebase.auth();
        const db = firebase.firestore();

        let currentSection = 'dashboard';
        let breakingNews = [];
        let pendingContent = [];

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            loadDashboardData();
            loadPendingContent();
            loadBreakingNews();
            loadAds();
        });

        // Show section
        function showSection(section) {
            currentSection = section;
            
            ['dashboard', 'moderation', 'news', 'ads'].forEach(s => {
                document.getElementById(`section-${s}`).classList.add('hidden');
                const navBtn = document.getElementById(`nav-${s}`);
                if (s === section) {
                    navBtn.className = 'px-4 py-2 rounded-lg font-semibold bg-purple-600 text-white';
                } else {
                    navBtn.className = 'px-4 py-2 rounded-lg font-semibold text-gray-400 hover:bg-gray-700';
                }
            });
            
            document.getElementById(`section-${section}`).classList.remove('hidden');
            lucide.createIcons();
        }

        // Load dashboard data
        function loadDashboardData() {
            const activities = [
                { user: 'John Doe', action: 'uploaded a video', time: '5 min ago', icon: 'video', color: '#3b82f6' },
                { user: 'Jane Smith', action: 'earned 50 iKbp', time: '12 min ago', icon: 'trending-up', color: '#f59e0b' },
                { user: 'Mike Johnson', action: 'started live stream', time: '23 min ago', icon: 'bell', color: '#ec4899' },
                { user: 'Sarah Wilson', action: 'uploaded 3 images', time: '1 hour ago', icon: 'image', color: '#10b981' }
            ];

            const activityHtml = activities.map(activity => `
                <div class="flex items-center gap-3 p-3 bg-gray-700 rounded-lg">
                    <div class="p-2 rounded" style="background-color: ${activity.color}20;">
                        <i data-lucide="${activity.icon}" style="color: ${activity.color}; width: 16px; height: 16px;"></i>
                    </div>
                    <div class="flex-1">
                        <p class="text-white text-sm"><span class="font-semibold">${activity.user}</span> ${activity.action}</p>
                        <p class="text-gray-400 text-xs">${activity.time}</p>
                    </div>
                </div>
            `).join('');

            document.getElementById('recent-activity').innerHTML = activityHtml;

            const contributors = [
                { name: 'Alice Brown', uploads: 45, points: 2340, rank: 1 },
                { name: 'Bob Williams', uploads: 38, points: 1950, rank: 2 },
                { name: 'Carol Davis', uploads: 32, points: 1670, rank: 3 },
                { name: 'David Miller', uploads: 28, points: 1420, rank: 4 }
            ];

            const contributorsHtml = contributors.map(user => `
                <div class="flex items-center gap-3 p-3 bg-gray-700 rounded-lg">
                    <div class="w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center text-white font-bold">
                        ${user.rank}
                    </div>
                    <div class="flex-1">
                        <p class="text-white font-semibold">${user.name}</p>
                        <p class="text-gray-400 text-xs">${user.uploads} uploads • ${user.points} iKbp</p>
                    </div>
                </div>
            `).join('');

            document.getElementById('top-contributors').innerHTML = contributorsHtml;
            lucide.createIcons();
        }

        // Load pending content
        function loadPendingContent() {
            pendingContent = [
                { id: 1, type: 'video', title: 'Community Event Highlights', author: 'John Doe', uploadedAt: '2 hours ago', status: 'pending' },
                { id: 2, type: 'video', title: 'TAU Tutorial Series', author: 'Jane Smith', uploadedAt: '4 hours ago', status: 'pending' },
                { id: 3, type: 'image', title: 'Team Photo 2024', author: 'Mike Johnson', uploadedAt: '1 day ago', status: 'pending' }
            ];

            renderPendingContent();
        }

        function renderPendingContent() {
            const container = document.getElementById('pending-content');
            document.getElementById('pending-count').textContent = `${pendingContent.length} Pending`;

            if (pendingContent.length === 0) {
                container.innerHTML = `
                    <div class="bg-gray-800 rounded-lg p-12 text-center">
                        <i data-lucide="check-circle" class="mx-auto mb-4 text-green-400" style="width: 48px; height: 48px;"></i>
                        <p class="text-white text-xl font-semibold mb-2">All caught up!</p>
                        <p class="text-gray-400">No pending content to review</p>
                    </div>
                `;
            } else {
                container.innerHTML = pendingContent.map(content => `
                    <div class="bg-gray-800 rounded-lg p-6">
                        <div class="flex items-start gap-4">
                            <div class="p-3 bg-gray-700 rounded-lg">
                                <i data-lucide="${content.type}" class="${content.type === 'video' ? 'text-blue-400' : 'text-green-400'}" style="width: 24px; height: 24px;"></i>
                            </div>
                            
                            <div class="flex-1">
                                <div class="flex items-start justify-between mb-2">
                                    <div>
                                        <h3 class="text-white font-bold text-lg">${content.title}</h3>
                                        <p class="text-gray-400 text-sm">by ${content.author} • ${content.uploadedAt}</p>
                                    </div>
                                    <span class="px-3 py-1 rounded text-xs font-semibold bg-yellow-500 text-gray-900">
                                        PENDING
                                    </span>
                                </div>

                                <div class="flex gap-2 mt-4">
                                    <button onclick="moderateContent(${content.id}, 'approved')" class="flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 font-semibold">
                                        <i data-lucide="check-circle" style="width: 18px; height: 18px;"></i> Approve
                                    </button>
                                    <button onclick="moderateContent(${content.id}, 'rejected')" class="flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 font-semibold">
                                        <i data-lucide="x-circle" style="width: 18px; height: 18px;"></i> Reject
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            lucide.createIcons();
        }

        function moderateContent(contentId, action) {
            pendingContent = pendingContent.filter(item => item.id !== contentId);
            renderPendingContent();
            alert(`Content ${action}!`);
        }

        // Load breaking news
        function loadBreakingNews() {
            breakingNews = [
                { id: 1, content: 'TAU Africa announces new partnership', priority: 'high', isActive: true, createdAt: '2024-03-15' },
                { id: 2, content: 'New features coming to TAU Main App', priority: 'normal', isActive: true, createdAt: '2024-03-14' }
            ];

            renderBreakingNews();
        }

        function renderBreakingNews() {
            const container = document.getElementById('news-list');
            container.innerHTML = breakingNews.map(news => `
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="bell" class="${news.isActive ? 'text-red-500' : 'text-gray-500'}" style="width: 20px; height: 20px;"></i>
                                <span class="px-2 py-1 rounded text-xs font-semibold ${
                                    news.priority === 'urgent' ? 'bg-red-600 text-white' :
                                    news.priority === 'high' ? 'bg-orange-600 text-white' :
                                    'bg-gray-600 text-white'
                                }">
                                    ${news.priority.toUpperCase()}
                                </span>
                                <span class="px-2 py-1 rounded text-xs font-semibold ${
                                    news.isActive ? 'bg-green-600 text-white' : 'bg-gray-600 text-white'
                                }">
                                    ${news.isActive ? 'ACTIVE' : 'INACTIVE'}
                                </span>
                            </div>
                            <p class="text-white text-lg">${news.content}</p>
                            <p class="text-gray-400 text-sm mt-2">Posted on ${news.createdAt}</p>
                        </div>
                    </div>

                    <div class="flex gap-2">
                        <button onclick="toggleNews(${news.id})" class="${news.isActive ? 'bg-gray-600 hover:bg-gray-700' : 'bg-green-600 hover:bg-green-700'} text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 flex-1">
                            <i data-lucide="edit" style="width: 16px; height: 16px;"></i> ${news.isActive ? 'Deactivate' : 'Activate'}
                        </button>
                        <button onclick="deleteNews(${news.id})" class="flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2">
                            <i data-lucide="trash-2" style="width: 16px; height: 16px;"></i> Delete
                        </button>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        document.getElementById('news-form')?.addEventListener('submit', (e) => {
            e.preventDefault();
            const content = document.getElementById('news-content').value;
            const priority = document.getElementById('news-priority').value;
            
            breakingNews.unshift({
                id: Date.now(),
                content: content,
                priority: priority,
                isActive: true,
                createdAt: new Date().toISOString().split('T')[0]
            });

            renderBreakingNews();
            e.target.reset();
            alert('Breaking news published!');
        });

        function toggleNews(newsId) {
            breakingNews = breakingNews.map(news =>
                news.id === newsId ? { ...news, isActive: !news.isActive } : news
            );
            renderBreakingNews();
        }

        function deleteNews(newsId) {
            breakingNews = breakingNews.filter(news => news.id !== newsId);
            renderBreakingNews();
        }

        // Load ads
        function loadAds() {
            const ads = [
                { id: 1, title: 'Kabiru Mining Launch', content: 'Join the Kabiru mining revolution', duration: '30 days', impressions: 5420, clicks: 234 },
                { id: 2, title: 'TAU Ecosystem Update', content: 'New features available now', duration: '15 days', impressions: 3210, clicks: 156 }
            ];

            const container = document.getElementById('ads-list');
            container.innerHTML = ads.map(ad => `
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex items-start justify-between mb-4">
                        <div>
                            <h3 class="text-white text-xl font-bold mb-2">${ad.title}</h3>
                            <p class="text-gray-400 mb-3">${ad.content}</p>
                            <div class="flex gap-4 text-sm flex-wrap">
                                <span class="text-gray-400">Duration: <span class="text-white font-semibold">${ad.duration}</span></span>
                                <span class="text-gray-400">Impressions: <span class="text-white font-semibold">${ad.impressions.toLocaleString()}</span></span>
                                <span class="text-gray-400">Clicks: <span class="text-white font-semibold">${ad.clicks.toLocaleString()}</span></span>
                                <span class="text-gray-400">CTR: <span class="text-green-400 font-semibold">${((ad.clicks / ad.impressions) * 100).toFixed(2)}%</span></span>
                            </div>
                        </div>
                    </div>

                    <div class="flex gap-2">
                        <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2">
                            <i data-lucide="edit" style="width: 16px; height: 16px;"></i> Edit
                        </button>
                        <button class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg">Pause</button>
                        <button class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center gap-2">
                            <i data-lucide="trash-2" style="width: 16px; height: 16px;"></i> Delete
                        </button>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }
    </script>
</body>
  </html>
